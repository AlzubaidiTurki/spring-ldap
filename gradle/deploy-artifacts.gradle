def isSnapshot = version?.endsWith("-SNAPSHOT")
def isMilestone = version?.matches('^.*[.-]M\\d+$') || version?.matches('^.*[.-]RC\\d+$')
def isRelease = !(isSnapshot || isMilestone)

task deployArtifacts {
    group = 'Deploy tasks'
    description = "Deploys the artifacts to either Artifactory or Maven Central"
    if(isRelease) {
        dependsOn "uploadArchives"
    } else {
        dependsOn "artifactoryPublish"
    }
}
